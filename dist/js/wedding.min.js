function debounce(e,i,s){var t;return function(){var o=this,n=arguments,a=s&&!t;clearTimeout(t),t=setTimeout(function(){t=null,s||e.apply(o,n)},i),a&&e.apply(o,n)}}!function(e,i,s,t){function o(e){var i="./styles/images/gallery/";p=10,null!=c&&"church"==c&&(i="./styles/images/churchwedding/gallery/",p=5),s("#gallery-image").attr("src",i+e+".jpg"),s("#navigator > ul").children(".filled").removeClass("filled"),s('#navigator > ul > li[data-index="'+e+'"]').addClass("filled")}function n(){s("#modal").hide(),s("#picture-gallery").hide(),s("#rsvp-form-wrapper").hide(),s("body").removeClass("noscroll"),s("#navigator > ul").empty()}function a(){s("body").addClass("noscroll"),s("#modal").show()}function r(e){var i=s("#rsvp-response-form"),t=e.guestList;i.show();s(".rsvp-error");var o="";if(t&&(s.each(t,function(e,i){o+="<li class='rsvp-guest-list-names'>"+i.firstName+"&nbsp&nbsp&nbsp"+i.lastName+"</li>"}),s(".rsvp-guest-list").html(o),s("#guest-party-id").val(e.guestPartyId)),e.plusOne){s("#rsvp-response-form-questions").last().append("<div><p>Will you be bringing a +1?</p><p class='rsvp-error' id='rsvp-validation-plusone'>Please fill out +1 name.</p><div class='rsvp-radio-button-wrapper'><span><input type='radio' name='plusOneResponse' value='true' required checked/>Yes</span><span><input type='radio' name='plusOneResponse' value='false'/>No</span></div><div id='plus-one-section'><input type='text' class='rsvp-input rsvp-full-input' id='plus-one-name' name='plusOneName' placeholder='Name'></div></div>")}i.on("click",'input[type="radio"][name="plusOneResponse"]',function(){var e=i.find("#plus-one-section");"true"==this.value?e.show():(e.hide(),i.find("#plus-one-name").val(""))});var n=s("#rsvp-response-diet"),a=s("#rsvp-song"),r=s("#rsvp-diet-other-textfield");i.on("click",'input[type="radio"][name="attending"]',function(){"true"==this.value?(n.show(),a.show()):(r.val(""),n.hide(),a.hide())}),i.on("click",'input[type="radio"][name="dietary"]',function(){"other"==this.value?r.show():r.val("").hide()}),i.on("submit",function(t){i.find(".rsvp-error").hide(),"true"!=(e=i.serializeFormJSON()).plusOneResponse||e.plusOneName?"true"!=e.attending||"other"!=e.dietary||e.dietOther?s.ajax({method:"POST",url:"/rsvp/response",data:e,success:function(e,t,o){i.hide(),e&&(i.hide(),"true"==e.attending?function(e){var i=s("#rsvp-mad-lib-form");i.show(),s("#rsvp-mad-lib-groupid").val(e.guestPartyId),i.on("submit",function(e){s.ajax({method:"POST",url:"/rsvp/madlib",data:i.serializeFormJSON(),success:function(e,s,t){i.hide(),l(!0)},error:function(e,i,s){console.error(s)}}),e.preventDefault()})}(e):l())},error:function(e,i,s){console.error(s)}}):i.find("#rsvp-validation-diet").show():i.find("#rsvp-validation-plusone").show(),t.preventDefault()})}function l(e){s("#rsvp-thank-you-wrapper").show();var i="Thank you for response!";e&&(i+=" We look forward to seeing you!"),s("#rsvp-thank-you").html(i)}e.outerWidth>1024&&s(".section-image").each(function(e){s(this).attr("src",s(this).attr("src").replace("1024","1600"))}),s("a").on("click",function(i){if(""!==this.hash){i.preventDefault();var t=this.hash;s("html, body").animate({scrollTop:s(t).offset().top,easing:"swing"},300,function(){e.location.hash=t})}}),s("#mobile-menu-icon").on("click",function(){s(this).toggleClass("toggle-menu"),s("#top-nav").slideToggle()}),e.outerWidth<=768&&s("#top-nav > li > a ").on("click",function(){s("#mobile-menu-icon").toggleClass("toggle-menu"),s("#top-nav").slideToggle(200)}),s(this).scrollTop()>147&&s("#top-nav").addClass("scroll"),s(e).on("scroll",debounce(function(){s(e).scrollTop()>147&&e.outerWidth>768?s("#top-nav").addClass("scroll"):s("#top-nav").hasClass("scroll")&&s("#top-nav").removeClass("scroll")},100));var p,c,u=1;s("#view-gallery").on("click",function(){c=s(this).attr("data-type"),o(u);for(var e="<li class='filled' data-index='1'></li>",i=2;i<=p;i++)e+="<li data-index='"+i+"'></li>";s("#navigator > ul").append(e),a(),s("#picture-gallery").show()}),s("#navigator > ul").on("click","li",function(){var e=s(this);o(e.attr("data-index")),e.siblings(".filled").removeClass("filled"),e.addClass("filled")}),s("#left-arrow").on("click",function(){1==u?u=p:u--,o(u)}),s("#right-arrow").on("click",function(){u==p?u=1:u++,o(u)}),s("#close-modal").on("click",function(){n()}),s("#modal").on("click",function(e){e.target===this&&n()}),s(e).on("keyup",function(e){27==e.keyCode&&s("#modal").is(":visible")&&n()});var d=!1;s("#bridesmaid-pic-list").on("click","li",function(){if(!d){d=!0;var i=s(this);s("#bridesmaids-wrapper").addClass("selected");var t=i.position();i.css({left:t.left+"px",top:t.top+"px",opacity:".5"}).addClass("selected");var o=i.attr("id")+"-bio";s("#bridesmaids-bio").show().html(s("#"+o).html()),i.siblings(".selected").removeClass("selected").css({"margin-left":"",opacity:""}),i.animate({top:0,left:"50%","margin-left":e.outerWidth>1025?"-100px":"-62.5px",opacity:"1"},400,"swing",function(){d=!1})}});var v=!1;s("#groomsmen-pic-list").on("click","li",function(){var i=s(this);if(!i.hasClass("no-bio")&&!v){v=!0,s("#groomsmen-wrapper").addClass("selected");var t=i.position();i.css({left:t.left+"px",top:t.top+"px",opacity:".5"}).addClass("selected");var o=i.attr("id")+"-bio";s("#groomsmen-bio").show().html(s("#"+o).html()),i.siblings(".selected").removeClass("selected").css({"margin-left":"",opacity:""}),i.animate({top:0,left:"50%","margin-left":e.outerWidth>1025?"-100px":"-62.5px",opacity:"1"},400,"swing",function(){v=!1})}}),s("#rsvp-button").on("click",function(){a(),s("#rsvp-form-wrapper").show()}),s("#rsvp-form").on("submit",function(e){e.preventDefault();var i=s(this),t=s(".rsvp-error"),o=s("#rsvp-form");s.ajax({method:"POST",url:"/rsvp",data:o.serializeFormJSON(),success:function(e,s,o){e&&(i.hide(),t.hide(),r(e))},error:function(e,i,o){t.hide(),404==e.status?s("#rsvp-not-found").show():400==e.status&&s("#rsvp-bad-request").show()}})})}(window,document,$),function(e){e.fn.serializeFormJSON=function(){var i={},s=this.serializeArray();return e.each(s,function(){i[this.name]?(i[this.name].push||(i[this.name]=[i[this.name]]),i[this.name].push(this.value||"")):i[this.name]=this.value||""}),i}}(jQuery);