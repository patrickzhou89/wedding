function debounce(e,s,i){var t;return function(){var o=this,n=arguments,a=i&&!t;clearTimeout(t),t=setTimeout(function(){t=null,i||e.apply(o,n)},s),a&&e.apply(o,n)}}!function(e,s,i,t){function o(e){var s="./styles/images/gallery/";c=10,null!=p&&"church"==p&&(s="./styles/images/churchwedding/gallery/",c=5),i("#gallery-image").attr("src",s+e+".jpg"),i("#navigator > ul").children(".filled").removeClass("filled"),i('#navigator > ul > li[data-index="'+e+'"]').addClass("filled")}function n(){i("#modal").hide(),i("#picture-gallery").hide(),i("#rsvp-form-wrapper").hide(),i("body").removeClass("noscroll"),i("#navigator > ul").empty()}function a(){i("body").addClass("noscroll"),i("#modal").show()}function l(e){var s=i("#rsvp-response-form"),t=e.guestList;s.show();i(".rsvp-error");var o="";if(t&&(i.each(t,function(e,s){o+="<li class='rsvp-guest-list-names'>"+s.firstName+"&nbsp&nbsp&nbsp"+s.lastName+"</li>"}),i(".rsvp-guest-list").html(o),i("#guest-party-id").val(e.guestPartyId)),e.plusOne){i("#rsvp-response-form-questions").last().append("<div><p>Will you be bringing a +1?</p><p class='rsvp-error' id='rsvp-validation'>Please fill out +1 name.</p><div class='rsvp-radio-button-wrapper'><span><input type='radio' name='plusOneResponse' value='true' required checked/>Yes</span><span><input type='radio' name='plusOneResponse' value='false'/>No</span></div><div id='plus-one-section'><input type='text' class='rsvp-input' id='plus-one-name' name='plusOneName' placeholder='Name'></div></div>")}s.on("click",'input[type="radio"][name="plusOneResponse"]',function(){var e=s.find("#plus-one-section");"true"==this.value?e.show():(e.hide(),s.find("#plus-one-name").val(""))}),s.on("submit",function(t){s.find(".rsvp-error").hide(),"true"!=(e=s.serializeFormJSON()).plusOneResponse||e.plusOneName?i.ajax({method:"POST",url:"/rsvp/response",data:e,success:function(e,t,o){s.hide(),e&&(s.hide(),"true"==e.attending?function(e){var s=i("#rsvp-mad-lib-form");s.show(),i("#rsvp-mad-lib-groupid").val(e.guestPartyId),s.on("submit",function(e){i.ajax({method:"POST",url:"/rsvp/madlib",data:s.serializeFormJSON(),success:function(e,i,t){s.hide(),r(!0)},error:function(e,s,i){console.error(i)}}),e.preventDefault()})}(e):r())},error:function(e,s,i){console.error(i)}}):s.find("#rsvp-validation").show(),t.preventDefault()})}function r(e){i("#rsvp-thank-you-wrapper").show();var s="Thank you for response!";e&&(s+=" We look forward to seeing you!"),i("#rsvp-thank-you").html(s)}e.outerWidth>1024&&i(".section-image").each(function(e){i(this).attr("src",i(this).attr("src").replace("1024","1600"))}),i("a").on("click",function(s){if(""!==this.hash){s.preventDefault();var t=this.hash;i("html, body").animate({scrollTop:i(t).offset().top,easing:"swing"},300,function(){e.location.hash=t})}}),i("#mobile-menu-icon").on("click",function(){i(this).toggleClass("toggle-menu"),i("#top-nav").slideToggle()}),e.outerWidth<=768&&i("#top-nav > li > a ").on("click",function(){i("#mobile-menu-icon").toggleClass("toggle-menu"),i("#top-nav").slideToggle(200)}),i(this).scrollTop()>147&&i("#top-nav").addClass("scroll"),i(e).on("scroll",debounce(function(){i(e).scrollTop()>147&&e.outerWidth>768?i("#top-nav").addClass("scroll"):i("#top-nav").hasClass("scroll")&&i("#top-nav").removeClass("scroll")},100));var c,p,u=1;i("#view-gallery").on("click",function(){p=i(this).attr("data-type"),o(u);for(var e="<li class='filled' data-index='1'></li>",s=2;s<=c;s++)e+="<li data-index='"+s+"'></li>";i("#navigator > ul").append(e),a(),i("#picture-gallery").show()}),i("#navigator > ul").on("click","li",function(){var e=i(this);o(e.attr("data-index")),e.siblings(".filled").removeClass("filled"),e.addClass("filled")}),i("#left-arrow").on("click",function(){1==u?u=c:u--,o(u)}),i("#right-arrow").on("click",function(){u==c?u=1:u++,o(u)}),i("#close-modal").on("click",function(){n()}),i("#modal").on("click",function(e){e.target===this&&n()}),i(e).on("keyup",function(e){27==e.keyCode&&i("#modal").is(":visible")&&n()});var d=!1;i("#bridesmaid-pic-list").on("click","li",function(){if(!d){d=!0;var s=i(this);i("#bridesmaids-wrapper").addClass("selected");var t=s.position();s.css({left:t.left+"px",top:t.top+"px",opacity:".5"}).addClass("selected");var o=s.attr("id")+"-bio";i("#bridesmaids-bio").show().html(i("#"+o).html()),s.siblings(".selected").removeClass("selected").css({"margin-left":"",opacity:""}),s.animate({top:0,left:"50%","margin-left":e.outerWidth>1025?"-100px":"-62.5px",opacity:"1"},400,"swing",function(){d=!1})}});var f=!1;i("#groomsmen-pic-list").on("click","li",function(){var s=i(this);if(!s.hasClass("no-bio")&&!f){f=!0,i("#groomsmen-wrapper").addClass("selected");var t=s.position();s.css({left:t.left+"px",top:t.top+"px",opacity:".5"}).addClass("selected");var o=s.attr("id")+"-bio";i("#groomsmen-bio").show().html(i("#"+o).html()),s.siblings(".selected").removeClass("selected").css({"margin-left":"",opacity:""}),s.animate({top:0,left:"50%","margin-left":e.outerWidth>1025?"-100px":"-62.5px",opacity:"1"},400,"swing",function(){f=!1})}}),i("#rsvp-button").on("click",function(){a(),i("#rsvp-form-wrapper").show()}),i("#rsvp-form").on("submit",function(e){e.preventDefault();var s=i(this),t=i(".rsvp-error"),o=i("#rsvp-form");i.ajax({method:"POST",url:"/rsvp",data:o.serializeFormJSON(),success:function(e,i,o){e&&(s.hide(),t.hide(),l(e))},error:function(e,s,o){t.hide(),404==e.status?i("#rsvp-not-found").show():400==e.status&&i("#rsvp-bad-request").show()}})})}(window,document,$),function(e){e.fn.serializeFormJSON=function(){var s={},i=this.serializeArray();return e.each(i,function(){s[this.name]?(s[this.name].push||(s[this.name]=[s[this.name]]),s[this.name].push(this.value||"")):s[this.name]=this.value||""}),s}}(jQuery);